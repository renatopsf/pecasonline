$(function(){"use strict";module("collapse plugin"),test("should be defined on jquery object",function(){ok($(document.body).collapse,"collapse method is defined")}),module("collapse",{setup:function(){$.fn.bootstrapCollapse=$.fn.collapse.noConflict()},teardown:function(){$.fn.collapse=$.fn.bootstrapCollapse,delete $.fn.bootstrapCollapse}}),test("should provide no conflict",function(){strictEqual($.fn.collapse,void 0,"collapse was set back to undefined (org value)")}),test("should return jquery collection containing the element",function(){var o=$("<div/>"),a=o.bootstrapCollapse();ok(a instanceof $,"returns jquery collection"),strictEqual(a[0],o[0],"collection contains element")}),test("should show a collapsed element",function(){var o=$('<div class="collapse"/>').bootstrapCollapse("show");ok(o.hasClass("in"),'has class "in"'),ok(!/height/i.test(o.attr("style")),"has height reset")}),test("should hide a collapsed element",function(){var o=$('<div class="collapse"/>').bootstrapCollapse("hide");ok(!o.hasClass("in"),'does not have class "in"'),ok(/height/i.test(o.attr("style")),"has height set")}),test("should not fire shown when show is prevented",function(){stop(),$('<div class="collapse"/>').on("show.bs.collapse",function(o){o.preventDefault(),ok(!0,"show event fired"),start()}).on("shown.bs.collapse",function(){ok(!1,"shown event fired")}).bootstrapCollapse("show")}),test("should reset style to auto after finishing opening collapse",function(){stop(),$('<div class="collapse" style="height: 0px"/>').on("show.bs.collapse",function(){equal(this.style.height,"0px","height is 0px")}).on("shown.bs.collapse",function(){strictEqual(this.style.height,"","height is auto"),start()}).bootstrapCollapse("show")}),test('should remove "collapsed" class from target when collapse is shown',function(){stop();var o=$('<a data-toggle="collapse" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1"/>').appendTo("#qunit-fixture").on("show.bs.collapse",function(){ok(!o.hasClass("collapsed")),start()}),o.click()}),test('should add "collapsed" class to target when collapse is hidden',function(){stop();var o=$('<a data-toggle="collapse" href="#test1"/>').appendTo("#qunit-fixture");$('<div id="test1" class="in"/>').appendTo("#qunit-fixture").on("hide.bs.collapse",function(){ok(o.hasClass("collapsed")),start()}),o.click()}),test('should remove "collapsed" class from active accordion target',function(){stop();var o='<div id="accordion"><div class="accordion-group"/><div class="accordion-group"/><div class="accordion-group"/></div>',a=$(o).appendTo("#qunit-fixture").find(".accordion-group"),s=$('<a data-toggle="collapse" href="#body1" data-parent="#accordion"/>').appendTo(a.eq(0));$('<div id="body1" class="in"/>').appendTo(a.eq(0));var e=$('<a class="collapsed" data-toggle="collapse" href="#body2" data-parent="#accordion"/>').appendTo(a.eq(1));$('<div id="body2"/>').appendTo(a.eq(1));var t=$('<a class="collapsed" data-toggle="collapse" href="#body3" data-parent="#accordion"/>').appendTo(a.eq(2));$('<div id="body3"/>').appendTo(a.eq(2)).on("show.bs.collapse",function(){ok(s.hasClass("collapsed"),'inactive target 1 does have class "collapsed"'),ok(e.hasClass("collapsed"),'inactive target 2 does have class "collapsed"'),ok(!t.hasClass("collapsed"),'active target 3 does not have class "collapsed"'),start()}),t.click()}),test("should allow dots in data-parent",function(){stop();var o='<div class="accordion"><div class="accordion-group"/><div class="accordion-group"/><div class="accordion-group"/></div>',a=$(o).appendTo("#qunit-fixture").find(".accordion-group"),s=$('<a data-toggle="collapse" href="#body1" data-parent=".accordion"/>').appendTo(a.eq(0));$('<div id="body1" class="in"/>').appendTo(a.eq(0));var e=$('<a class="collapsed" data-toggle="collapse" href="#body2" data-parent=".accordion"/>').appendTo(a.eq(1));$('<div id="body2"/>').appendTo(a.eq(1));var t=$('<a class="collapsed" data-toggle="collapse" href="#body3" data-parent=".accordion"/>').appendTo(a.eq(2));$('<div id="body3"/>').appendTo(a.eq(2)).on("show.bs.collapse",function(){ok(s.hasClass("collapsed"),'inactive target 1 does have class "collapsed"'),ok(e.hasClass("collapsed"),'inactive target 2 does have class "collapsed"'),ok(!t.hasClass("collapsed"),'active target 3 does not have class "collapsed"'),start()}),t.click()})});